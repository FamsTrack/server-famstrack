# FamTrack App
Are you worried that your family will get lost during their Hajj trip, or are you a travel tour vendor who wants to be able to monitor the whereabouts of your congregation? Calm down, FamTrack is here to help you. FamTrack is an IoT-based application that can monitor the whereabouts of your family or congregation and we also have a panic button feature if your family or clients get lost.
* RESTful endpoint for App's CRUD operation
* JSON formatted response

&nbsp;

## RESTful endpoints

### POST /register
> register new user

_Request Header_
```
not needed
```

_Request Body_
```json
{
  "email": "<string>",
  "password": "<string>",
  "role": "<string, admin/family>"
}
```

_Response (201 - created)_
```json
{
    "id": "<given id by system>",
    "email": "<user's email>",
    "role": "<user's role>"
}
```

_Response (400 - bad request)_
```json
{
  "errors": [
    "field email is required",
    "invalid email",
    "field password is required",
    "password at least have 6 character",
    "role should be one of admin or customer",
    "email must be unique"
  ]
}
```

### POST /login
> login user

_Request Header_
```
not needed
```

_Request Body_
```json
{
  "email": "<string>",
  "password": "<string>",
  "role": "<string, admin/family>"
}
```

_Response (200 - OK)_
```json
{
  "access_token": "<access_token generated by system>"
}
```

_Response (401 - invalidEmailPassword)_
```json
{
  "errors": "invalid email/password"
}
```

### GET /clients
> get all client data

_Request Header_
```json
{
  "access_token": "<string>"
}
```

_Request Body_
```
not needed
```

_Response (200 - OK)_
```json
[
  {
    "name": "<string>",
    "img": "<string>",
    "address": "<string>",
    "gender": "<string>",
    "contact": "<string>",
    "familiesId": "<integer>",
    "groupId": "<integer>",
    "birth_date": "<date>"
  }
]
```

_Response (500 - jwt)_
```json
{
  "errors": "jwt must be provided"
}
```

### GET /clients/:id
> get client data by id

_Request Header_
```json
{
  "access_token": "<string>"
}
```

_Request Body_
```
not needed
```

_Response (200 - OK)_
```json
{
  "name": "<string>",
  "img": "<string>",
  "address": "<string>",
  "gender": "<string>",
  "contact": "<string>",
  "familiesId": "<integer>",
  "groupId": "<integer>",
  "birth_date": "<date>"
}
```

_Response (404 - Not Found)_
```json
{
  "errors": "not found!"
}
```

_Response (500 - jwt)_
```json
{
  "errors": "jwt must be provided"
}
```

### POST /clients
> register new client data

_Request Header_
```json
{
  "access_token": "<string>"
}
```

_Request Body_
```json
{
  "name": "<string>",
  "img": "<string>",
  "address": "<string>",
  "gender": "<string>",
  "contact": "<string>",
  "familiesId": "<integer>",
  "groupId": "<integer>",
  "birth_date": "<date>"
}
```

_Response (200 - OK)_
```json
{
  "name": "<string>",
  "img": "<string>",
  "address": "<string>",
  "gender": "<string>",
  "contact": "<string>",
  "familiesId": "<integer>",
  "groupId": "<integer>",
  "birth_date": "<date>"
}
```

_Response (400 - Bad Request)_
```json
[
  "field name is required",
  "field address is required",
  "field password is required",
  "gender should be one of pria or wanita",
  "field contact is required",
  "field birth date is required",
  "field family id is required",
  "field group id is required"
]
```

_Response (401 - jwt)_
```json
{
  "errors": "unauthorize action!"
}
```

_Response (500 - jwt)_
```json
{
  "errors": "jwt must be provided"
}
```

### PUT /clients/:id
> update client data

_Request Header_
```json
{
  "access_token": "<string>"
}
```

_Request Body_
```json
{
  "name": "<string>",
  "img": "<string>",
  "address": "<string>",
  "gender": "<string>",
  "contact": "<string>",
  "familiesId": "<integer>",
  "groupId": "<integer>",
  "birth_date": "<date>"
}
```

_Response (200 - OK)_
```json
{
  "name": "<string>",
  "img": "<string>",
  "address": "<string>",
  "gender": "<string>",
  "contact": "<string>",
  "familiesId": "<integer>",
  "groupId": "<integer>",
  "birth_date": "<date>"
}
```

_Response (400 - Bad Request)_
```json
[
  "field name is required",
  "field address is required",
  "field password is required",
  "gender should be one of pria or wanita",
  "field contact is required",
  "field birth date is required",
  "field family id is required",
  "field group id is required"
]
```

_Response (401 - jwt)_
```json
{
  "errors": "unauthorize action!"
}
```

_Response (404 - Not Found)_
```json
{
  "errors": "not found!"
}
```

_Response (500 - jwt)_
```json
{
  "errors": "jwt must be provided"
}
```

### GET /devices
> get all device data

_Request Header_
```json
{
  "access_token": "<string>"
}
```

_Request Body_
```
not needed
```

_Response (200 - OK)_
```json
[
  {
    "longitude": "<float>",
    "latitude": "<float>",
    "panicStatus": "<boolean>",
    "buzzerStatus": "<boolean>",
    "arduinoUniqueKey": "<string>",
  }
]
```

_Response (401 - unautorized)_
```json
{
  "errors": "unauthorize action!"
}
```

_Response (500 - jwt)_
```json
{
  "errors": "jwt must be provided"
}
```

### GET /devices/:id
> get device data by id

_Request Header_
```json
{
  "access_token": "<string>"
}
```

_Request Body_
```
not needed
```

_Response (200 - OK)_
```json
{
  "longitude": "<float>",
  "latitude": "<float>",
  "panicStatus": "<boolean>",
  "buzzerStatus": "<boolean>",
  "arduinoUniqueKey": "<string>",
}
```

_Response (401 - unauthorized)_
```json
{
  "errors": "unauthorize action!"
}
```

_Response (404 - Not Found)_
```json
{
  "errors": "not found!"
}
```

_Response (500 - jwt)_
```json
{
  "errors": "jwt must be provided"
}
```

### POST /devices
> register new device data

_Request Header_
```json
{
  "access_token": "<string>"
}
```

_Request Body_
```json
{
  "longitude": "<float>",
  "latitude": "<float>",
  "panicStatus": "<boolean>",
  "buzzerStatus": "<boolean>",
  "arduinoUniqueKey": "<string>",
}
```

_Response (201 - OK)_
```json
{
  "longitude": "<float>",
  "latitude": "<float>",
  "panicStatus": "<boolean>",
  "buzzerStatus": "<boolean>",
  "arduinoUniqueKey": "<string>",
}
```

_Response (400 - bad Request)_
```json
{
  "errors": [
    "field longitude is required",
    "field latitude is required",
    "field panicStatus is required",
    "field buzzerStatus is required",
    "field arduino unique key is required",
    "field longitude must float",
    "field latitude must float",
    "arduinoUniqueKey must be unique"
  ]
}
```

_Response (401 - unauthorized)_
```json
{
  "errors": "unauthorize action!"
}
```

_Response (404 - Not Found)_
```json
{
  "errors": "not found!"
}
```

_Response (500 - jwt)_
```json
{
  "errors": "jwt must be provided"
}
```

### PATCH /devices/:id
> register new device data

_Request Header_
```json
{
  "access_token": "<string>"
}
```

_Request Body_
```json
{
  "longitude": "<float>",
  "latitude": "<float>",
  "panicStatus": "<boolean>",
  "buzzerStatus": "<boolean>",
  "arduinoUniqueKey": "<string>",
}
```

_Response (200 - OK)_
```json
{
  "longitude": "<float>",
  "latitude": "<float>",
  "panicStatus": "<boolean>",
  "buzzerStatus": "<boolean>",
  "arduinoUniqueKey": "<string>",
}
```

_Response (400 - bad Request)_
```json
{
  "errors": [
    "field longitude is required",
    "field latitude is required",
    "field panicStatus is required",
    "field buzzerStatus is required",
    "field arduino unique key is required",
    "field longitude must float",
    "field latitude must float",
    "arduinoUniqueKey must be unique"
  ]
}
```

_Response (401 - unauthorized)_
```json
{
  "errors": "unauthorize action!"
}
```

_Response (404 - Not Found)_
```json
{
  "errors": "not found!"
}
```

_Response (500 - jwt)_
```json
{
  "errors": "jwt must be provided"
}
```

### DELETE /devices/:id
> register new device data

_Request Header_
```json
{
  "access_token": "<string>"
}
```

_Request Body_
```
not needed
```

_Response (200 - OK)_
```json
{
  "message": "successfully delete device"
}
```

_Response (400 - bad Request)_
```json
{
  "errors": [
    "field longitude is required",
    "field latitude is required",
    "field panicStatus is required",
    "field buzzerStatus is required",
    "field arduino unique key is required",
    "field longitude must float",
    "field latitude must float",
    "arduinoUniqueKey must be unique"
  ]
}
```

_Response (401 - unauthorized)_
```json
{
  "errors": "unauthorize action!"
}
```

_Response (404 - Not Found)_
```json
{
  "errors": "not found!"
}
```

_Response (500 - jwt)_
```json
{
  "errors": "jwt must be provided"
}
```

### GET /families
> get all families data

_Request Header_
```json
{
  "access_token": "<string>"
}
```

_Request Body_
```
not needed
```

_Response (200 - OK)_
```json
[
  {
    "name": "<string>",
    "address": "<string>",
    "gender": "<string>",
    "contact": "<string>",
    "serId": "<snteger>"
  }
]
```

_Response (401 - unauthorized)_
```json
{
  "errors": "unauthorize action!"
}
```

_Response (500 - jwt)_
```json
{
  "errors": "jwt must be provided"
}
```

### GET /families:id
> get families data by id

_Request Header_
```json
{
  "access_token": "<string>"
}
```

_Request Body_
```
not needed
```

_Response (200 - OK)_
```json
{
  "name": "<string>",
  "address": "<string>",
  "gender": "<string>",
  "contact": "<string>",
  "serId": "<snteger>"
}
```

_Response (401 - unauthorized)_
```json
{
  "errors": "unauthorize action!"
}
```

_Response (404 - Not Found)_
```json
{
  "errors": "not found!"
}
```

_Response (500 - jwt)_
```json
{
  "errors": "jwt must be provided"
}
```

### POST /families
> register new family

_Request Header_
```json
{
  "access_token": "<string>"
}
```

_Request Body_
```json
{
  "name": "<string>",
  "address": "<string>",
  "gender": "<string>",
  "contact": "<string>",
  "serId": "<snteger>"
}
```

_Response (200 - OK)_
```json
{
  "id": "<integer>",
  "name": "<string>",
  "address": "<string>",
  "gender": "<string>",
  "contact": "<string>",
  "serId": "<snteger>"
}
```

_Request (400 - Bad Request)_
```json
{
  "errors": [
    "field name is required",
    "field address is required",
    "field password is required",
    "gender should be one of pria or wanita",
    "field contact is required",
    "field user id is required"
  ]
}
```

_Response (401 - unauthorized)_
```json
{
  "errors": "unauthorize action!"
}
```

_Response (500 - jwt)_
```json
{
  "errors": "jwt must be provided"
}
```

### PUT /families/:id
> update families data by id

_Request Header_
```json
{
  "access_token": "<string>"
}
```

_Request Body_
```json
{
  "name": "<string>",
  "address": "<string>",
  "gender": "<string>",
  "contact": "<string>",
  "serId": "<snteger>"
}
```

_Response (200 - OK)_
```json
{
  "id": "<integer>",
  "name": "<string>",
  "address": "<string>",
  "gender": "<string>",
  "contact": "<string>",
  "serId": "<snteger>"
}
```

_Request (400 - Bad Request)_
```json
{
  "errors": [
    "field name is required",
    "field address is required",
    "field password is required",
    "gender should be one of pria or wanita",
    "field contact is required",
    "field user id is required"
  ]
}
```

_Response (401 - unauthorized)_
```json
{
  "errors": "unauthorize action!"
}
```

_Response (404 - Not Found)_
```json
{
  "errors": "not found!"
}
```

_Response (500 - jwt)_
```json
{
  "errors": "jwt must be provided"
}
```

### DELETE /families/:id
> delete families data by id

_Request Header_
```json
{
  "access_token": "<string>"
}
```

_Request Body_
```
not needed
```

_Response (200 - OK)_
```json
{
  "message": "successfully delete family"
}
```

_Response (401 - unauthorized)_
```json
{
  "errors": "unauthorize action!"
}
```

_Response (404 - Not Found)_
```json
{
  "errors": "not found!"
}
```

_Response (500 - jwt)_
```json
{
  "errors": "jwt must be provided"
}
```

### GET /groups
> get all groups data

_Request Header_
```json
{
  "access_token": "<string>"
}
```

_Request Body_
```
not needed
```

_Response (200 - OK)_
```json
[
  {
    "name": "<string>",
    "year": "<integer>"
  }
]
```

_Response (401 - unauthorized)_
```json
{
  "errors": "unauthorize action!"
}
```

_Response (500 - jwt)_
```json
{
  "errors": "jwt must be provided"
}
```

### GET /groups/:id
> get group data by id

_Request Header_
```json
{
  "access_token": "<string>"
}
```

_Request Body_
```
not needed
```

_Response (200 - OK)_
```json
{
  "id": "<integer>",
  "name": "<string>",
  "year": "<integer>"
}
```

_Response (401 - unauthorized)_
```json
{
  "errors": "unauthorize action!"
}
```

_Response (404 - Not Found)_
```json
{
  "errors": "not found!"
}
```

_Response (500 - jwt)_
```json
{
  "errors": "jwt must be provided"
}
```

### POST /groups
> register new group

_Request Header_
```json
{
  "access_token": "<string>"
}
```

_Request Body_
```json
{
  "name": "<string>",
  "year": "<integer>"
}
```

_Response (200 - OK)_
```json
{
  "id": "<integer>",
  "name": "<string>",
  "year": "<snteger>"
}
```

_Request (400 - Bad Request)_
```json
{
  "errors": [
    "field name is required",
    "field year is required"
  ]
}
```

_Response (401 - unauthorized)_
```json
{
  "errors": "unauthorize action!"
}
```

_Response (500 - jwt)_
```json
{
  "errors": "jwt must be provided"
}
```

### PUT /groups/:id
> update group data by id

_Request Header_
```json
{
  "access_token": "<string>"
}
```

_Request Body_
```json
{
  "name": "<string>",
  "address": "<string>",
  "year": "<snteger>"
}
```

_Response (200 - OK)_
```json
{
  "id": "<integer>",
  "name": "<string>",
  "year": "<snteger>"
}
```

_Request (400 - Bad Request)_
```json
{
  "errors": [
    "field name is required",
    "field year is required"
  ]
}
```

_Response (401 - unauthorized)_
```json
{
  "errors": "unauthorize action!"
}
```

_Response (404 - Not Found)_
```json
{
  "errors": "not found!"
}
```

_Response (500 - jwt)_
```json
{
  "errors": "jwt must be provided"
}
```

### DELETE /groups/:id
> delete groups data by id

_Request Header_
```json
{
  "access_token": "<string>"
}
```

_Request Body_
```
not needed
```

_Response (200 - OK)_
```json
{
  "message": "successfully delete family"
}
```

_Response (401 - unauthorized)_
```json
{
  "errors": "unauthorize action!"
}
```

_Response (404 - Not Found)_
```json
{
  "errors": "not found!"
}
```

_Response (500 - jwt)_
```json
{
  "errors": "jwt must be provided"
}
```

### GET /news
> get all news data

_Request Header_
```json
{
  "access_token": "<string>"
}
```

_Request Body_
```
not needed
```

_Response (200 - OK)_
```json
[
  {
    "id": "<integer>",
    "name": "<string>",
    "image": "<string>",
    "description": "<text>",
    "active": "<boolean>"
  }
]
```

### GET /news/:id
> get news data by id

_Request Header_
```json
{
  "access_token": "<string>"
}
```

_Request Body_
```
not needed
```

_Response (200 - OK)_
```json
{
  "id": "<integer>",
  "name": "<string>",
  "image": "<string>",
  "description": "<text>",
  "active": "<boolean>"
}
```

_Response (404 - Not Found)_
```json
{
  "errors": "not found!"
}
```

### POST /news
> store new news

_Request Header_
```json
{
  "access_token": "<string>"
}
```

_Request Body_
```json
{
  "name": "<string>",
  "image": "<string>",
  "description": "<text>"
}
```

_Response (200 - OK)_
```json
{
  "id": "<integer>",
  "name": "<string>",
  "image": "<string>",
  "description": "<text>",
  "active": "<boolean>"
}
```

_Request (400 - Bad Request)_
```json
{
  "errors": [
    "field name is required",
    "field image is required",
    "field description is required"
  ]
}
```

_Response (401 - unauthorized)_
```json
{
  "errors": "unauthorize action!"
}
```

_Response (500 - jwt)_
```json
{
  "errors": "jwt must be provided"
}
```

### PUT /news/:id
> update news

_Request Header_
```json
{
  "access_token": "<string>"
}
```

_Request Body_
```json
{
  "name": "<string>",
  "image": "<string>",
  "description": "<text>",
  "active": "<boolean>"
}
```

_Response (200 - OK)_
```json
{
  "id": "<integer>",
  "name": "<string>",
  "image": "<string>",
  "description": "<text>",
  "active": "<boolean>"
}
```

_Request (400 - Bad Request)_
```json
{
  "errors": [
    "field name is required",
    "field image is required",
    "field description is required",
    "field active is required"
  ]
}
```

_Response (401 - unauthorized)_
```json
{
  "errors": "unauthorize action!"
}
```

_Response (500 - jwt)_
```json
{
  "errors": "jwt must be provided"
}
```

### DELETE /news/:id
> delete news data by id

_Request Header_
```json
{
  "access_token": "<string>"
}
```

_Request Body_
```
not needed
```

_Response (200 - OK)_
```json
{
  "message": "successfully delete family"
}
```

_Response (401 - unauthorized)_
```json
{
  "errors": "unauthorize action!"
}
```

_Response (404 - Not Found)_
```json
{
  "errors": "not found!"
}
```

_Response (500 - jwt)_
```json
{
  "errors": "jwt must be provided"
}
```

### GET /groups/:id/schedule
> get all schedule data by group id

_Request Header_
```json
{
  "access_token": "<string>"
}
```

_Request Body_
```
not needed
```

_Response (200 - OK)_
```json
[
  {
    "id": "<integer>",
    "name": "<string>",
    "description": "<string>",
    "date": "<string>",
    "time": "<string>",
    "groupId": "<integer>",
    "createdAt": "<date>",
    "updatedAt": "<date>"
  }
]
```

_Response (404 - Not Found)_
```json
{
  "errors": "not found!"
}
```

### POST /groups/:id/schedule
> store new schedule data to group id

_Request Header_
```json
{
  "access_token": "<string>"
}
```

_Request Body_
```json
{
  "name": "<string>",
  "description": "<string>",
  "date": "<string>",
  "time": "<string>"
}
```

_Response (200 - OK)_
```json
{
  "id": "<integer>",
  "name": "<string>",
  "description": "<string>",
  "date": "<string>",
  "time": "<string>",
  "groupId": "<integer>",
  "createdAt": "<date>",
  "updatedAt": "<date>"
}
```

_Request (400 - Bad Request)_
```json
{
  "errors": [
    "field name is required",
    "field image is required",
    "field description is required"
  ]
}
```

_Response (401 - unauthorized)_
```json
{
  "errors": "unauthorize action!"
}
```

_Response (500 - jwt)_
```json
{
  "errors": "jwt must be provided"
}
```

### PUT /groups/:id/schedule/:schid
> update schedule data by id

_Request Header_
```json
{
  "access_token": "<string>"
}
```

_Request Body_
```json
{
  "name": "<string>",
  "description": "<string>",
  "date": "<string>",
  "time": "<string>"
}
```

_Response (200 - OK)_
```json
{
  "id": "<integer>",
  "name": "<string>",
  "description": "<string>",
  "date": "<string>",
  "time": "<string>",
  "groupId": "<integer>",
  "createdAt": "<date>",
  "updatedAt": "<date>"
}
```

_Request (400 - Bad Request)_
```json
{
  "errors": [
    "field name is required",
    "field image is required",
    "field description is required"
  ]
}
```

_Response (401 - unauthorized)_
```json
{
  "errors": "unauthorize action!"
}
```

_Response (404 - Not Found)_
```json
{
  "errors": "not found!"
}
```

_Response (500 - jwt)_
```json
{
  "errors": "jwt must be provided"
}
```

### DELETE /groups/:id/schedule/:schid
> update schedule data by id

_Request Header_
```json
{
  "access_token": "<string>"
}
```

_Request Body_
```json
not neede
```

_Response (200 - OK)_
```json
{
  "message": "successfully delete schedule"
}
```

_Request (400 - Bad Request)_
```json
{
  "errors": [
    "field name is required",
    "field image is required",
    "field description is required"
  ]
}
```

_Response (401 - unauthorized)_
```json
{
  "errors": "unauthorize action!"
}
```

_Response (404 - Not Found)_
```json
{
  "errors": "not found!"
}
```

_Response (500 - jwt)_
```json
{
  "errors": "jwt must be provided"
}
```